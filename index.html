<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pakar - Rekomendasi Jurusan Kuliah</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        dark: '#0a0a0a',
                        'dark-lighter': '#1a1a1a',
                        'dark-border': '#2a2a2a',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
        }
        .glow {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.3);
        }
        .result-card {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body class="text-gray-100 min-h-screen">
    
     ... existing code ... 

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        
        mobileMenuBtn.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // <CHANGE> Implementing SAW (Simple Additive Weighting) Method
        
        // Define criteria weights (total must be 1.0)
        const criteriaWeights = {
            subject: 0.30,      // 30% - Mata pelajaran favorit
            activity: 0.25,     // 25% - Aktivitas yang disukai
            personality: 0.25,  // 25% - Tipe kepribadian
            environment: 0.20   // 20% - Lingkungan kerja
        };

        // Define all majors with their criteria scores (1-5 scale)
        const majorsData = [
            {
                name: 'Teknik Informatika',
                icon: 'ðŸ’»',
                description: 'Mempelajari pemrograman, algoritma, dan pengembangan software',
                careers: ['Software Engineer', 'Data Scientist', 'AI Engineer', 'Full Stack Developer'],
                criteria: {
                    subject: { matematika: 5, fisika: 4, kimia: 2, biologi: 2, bahasa: 2, sejarah: 2, ekonomi: 3, seni: 3 },
                    activity: { coding: 5, design: 3, writing: 2, research: 4, business: 3, helping: 2, creating: 3, analyzing: 5 },
                    personality: { analytical: 5, creative: 3, social: 2, practical: 4 },
                    environment: { office: 5, outdoor: 1, lab: 3, creative: 3, remote: 5 }
                }
            },
            {
                name: 'Sistem Informasi',
                icon: 'ðŸ“Š',
                description: 'Menggabungkan teknologi informasi dengan manajemen bisnis',
                careers: ['Business Analyst', 'IT Consultant', 'Project Manager', 'System Analyst'],
                criteria: {
                    subject: { matematika: 4, fisika: 3, kimia: 2, biologi: 2, bahasa: 3, sejarah: 2, ekonomi: 5, seni: 2 },
                    activity: { coding: 4, design: 3, writing: 3, research: 3, business: 5, helping: 3, creating: 3, analyzing: 5 },
                    personality: { analytical: 5, creative: 3, social: 4, practical: 5 },
                    environment: { office: 5, outdoor: 1, lab: 2, creative: 3, remote: 5 }
                }
            },
            {
                name: 'Teknik Elektro',
                icon: 'âš¡',
                description: 'Mempelajari sistem kelistrikan, elektronika, dan telekomunikasi',
                careers: ['Electrical Engineer', 'Robotics Engineer', 'IoT Specialist', 'Power System Engineer'],
                criteria: {
                    subject: { matematika: 5, fisika: 5, kimia: 3, biologi: 2, bahasa: 2, sejarah: 1, ekonomi: 2, seni: 2 },
                    activity: { coding: 4, design: 3, writing: 2, research: 5, business: 2, helping: 2, creating: 4, analyzing: 4 },
                    personality: { analytical: 5, creative: 3, social: 2, practical: 5 },
                    environment: { office: 3, outdoor: 3, lab: 5, creative: 2, remote: 3 }
                }
            },
            {
                name: 'Desain Komunikasi Visual',
                icon: 'ðŸŽ¨',
                description: 'Menciptakan komunikasi visual melalui desain grafis dan multimedia',
                careers: ['Graphic Designer', 'UI/UX Designer', 'Art Director', 'Motion Designer'],
                criteria: {
                    subject: { matematika: 2, fisika: 2, kimia: 1, biologi: 2, bahasa: 3, sejarah: 3, ekonomi: 3, seni: 5 },
                    activity: { coding: 2, design: 5, writing: 3, research: 2, business: 3, helping: 3, creating: 5, analyzing: 3 },
                    personality: { analytical: 2, creative: 5, social: 4, practical: 3 },
                    environment: { office: 4, outdoor: 2, lab: 1, creative: 5, remote: 5 }
                }
            },
            {
                name: 'Sastra & Komunikasi',
                icon: 'âœï¸',
                description: 'Mempelajari bahasa, sastra, dan strategi komunikasi efektif',
                careers: ['Content Writer', 'Journalist', 'Public Relations', 'Editor', 'Copywriter'],
                criteria: {
                    subject: { matematika: 2, fisika: 1, kimia: 1, biologi: 2, bahasa: 5, sejarah: 4, ekonomi: 3, seni: 4 },
                    activity: { coding: 1, design: 3, writing: 5, research: 4, business: 3, helping: 4, creating: 5, analyzing: 3 },
                    personality: { analytical: 3, creative: 5, social: 5, practical: 3 },
                    environment: { office: 4, outdoor: 3, lab: 1, creative: 5, remote: 5 }
                }
            },
            {
                name: 'Manajemen Bisnis',
                icon: 'ðŸ’¼',
                description: 'Mempelajari strategi bisnis, manajemen, dan kewirausahaan',
                careers: ['Business Manager', 'Entrepreneur', 'Marketing Manager', 'Operations Manager'],
                criteria: {
                    subject: { matematika: 4, fisika: 2, kimia: 2, biologi: 2, bahasa: 3, sejarah: 3, ekonomi: 5, seni: 3 },
                    activity: { coding: 2, design: 3, writing: 3, research: 3, business: 5, helping: 4, creating: 4, analyzing: 5 },
                    personality: { analytical: 4, creative: 4, social: 5, practical: 5 },
                    environment: { office: 5, outdoor: 3, lab: 1, creative: 4, remote: 4 }
                }
            },
            {
                name: 'Kedokteran',
                icon: 'âš•ï¸',
                description: 'Mempelajari ilmu kesehatan dan pengobatan untuk membantu pasien',
                careers: ['Dokter Umum', 'Dokter Spesialis', 'Peneliti Medis', 'Dokter Bedah'],
                criteria: {
                    subject: { matematika: 3, fisika: 3, kimia: 4, biologi: 5, bahasa: 3, sejarah: 2, ekonomi: 2, seni: 2 },
                    activity: { coding: 2, design: 2, writing: 3, research: 5, business: 2, helping: 5, creating: 2, analyzing: 4 },
                    personality: { analytical: 5, creative: 3, social: 5, practical: 5 },
                    environment: { office: 3, outdoor: 2, lab: 5, creative: 2, remote: 1 }
                }
            },
            {
                name: 'Farmasi',
                icon: 'ðŸ’Š',
                description: 'Mempelajari obat-obatan, formulasi, dan pelayanan kefarmasian',
                careers: ['Apoteker', 'Research Scientist', 'Quality Control', 'Regulatory Affairs'],
                criteria: {
                    subject: { matematika: 3, fisika: 3, kimia: 5, biologi: 4, bahasa: 2, sejarah: 2, ekonomi: 3, seni: 2 },
                    activity: { coding: 2, design: 2, writing: 3, research: 5, business: 3, helping: 5, creating: 3, analyzing: 4 },
                    personality: { analytical: 5, creative: 3, social: 4, practical: 5 },
                    environment: { office: 3, outdoor: 2, lab: 5, creative: 2, remote: 2 }
                }
            },
            {
                name: 'Ilmu Hukum',
                icon: 'âš–ï¸',
                description: 'Mempelajari sistem hukum, perundangan, dan keadilan',
                careers: ['Lawyer', 'Legal Consultant', 'Judge', 'Notaris', 'Corporate Legal'],
                criteria: {
                    subject: { matematika: 3, fisika: 2, kimia: 2, biologi: 2, bahasa: 4, sejarah: 5, ekonomi: 4, seni: 2 },
                    activity: { coding: 2, design: 2, writing: 5, research: 5, business: 4, helping: 5, creating: 3, analyzing: 5 },
                    personality: { analytical: 5, creative: 3, social: 5, practical: 4 },
                    environment: { office: 5, outdoor: 2, lab: 1, creative: 2, remote: 3 }
                }
            },
            {
                name: 'Psikologi',
                icon: 'ðŸ§ ',
                description: 'Memahami perilaku manusia dan proses mental',
                careers: ['Psikolog Klinis', 'HR Specialist', 'Counselor', 'Organizational Psychologist'],
                criteria: {
                    subject: { matematika: 3, fisika: 2, kimia: 2, biologi: 4, bahasa: 4, sejarah: 3, ekonomi: 3, seni: 3 },
                    activity: { coding: 2, design: 2, writing: 4, research: 5, business: 3, helping: 5, creating: 3, analyzing: 5 },
                    personality: { analytical: 4, creative: 4, social: 5, practical: 4 },
                    environment: { office: 5, outdoor: 2, lab: 3, creative: 3, remote: 4 }
                }
            },
            {
                name: 'Arsitektur',
                icon: 'ðŸ›ï¸',
                description: 'Merancang dan mendesain bangunan serta ruang lingkungan',
                careers: ['Arsitek', 'Interior Designer', 'Urban Planner', '3D Visualizer'],
                criteria: {
                    subject: { matematika: 4, fisika: 4, kimia: 2, biologi: 2, bahasa: 3, sejarah: 3, ekonomi: 3, seni: 5 },
                    activity: { coding: 2, design: 5, writing: 2, research: 3, business: 3, helping: 3, creating: 5, analyzing: 4 },
                    personality: { analytical: 4, creative: 5, social: 3, practical: 5 },
                    environment: { office: 4, outdoor: 4, lab: 2, creative: 5, remote: 3 }
                }
            },
            {
                name: 'Akuntansi',
                icon: 'ðŸ“ˆ',
                description: 'Mempelajari pencatatan, pelaporan, dan analisis keuangan',
                careers: ['Akuntan Publik', 'Tax Consultant', 'Auditor', 'Financial Analyst'],
                criteria: {
                    subject: { matematika: 5, fisika: 2, kimia: 2, biologi: 2, bahasa: 3, sejarah: 2, ekonomi: 5, seni: 2 },
                    activity: { coding: 3, design: 2, writing: 3, research: 3, business: 5, helping: 3, creating: 2, analyzing: 5 },
                    personality: { analytical: 5, creative: 2, social: 3, practical: 5 },
                    environment: { office: 5, outdoor: 1, lab: 1, creative: 2, remote: 4 }
                }
            }
        ];

        // SAW Method Implementation
        function calculateSAW(formData) {
            console.log('[v0] Starting SAW calculation with form data:', formData);
            
            const results = [];

            // Calculate score for each major
            majorsData.forEach(major => {
                let totalScore = 0;

                // Calculate weighted score for each criterion
                for (let criterion in criteriaWeights) {
                    const userChoice = formData[criterion];
                    const criterionScore = major.criteria[criterion][userChoice] || 0;
                    
                    // Normalize score (already on 1-5 scale, normalize to 0-1)
                    const normalizedScore = criterionScore / 5;
                    
                    // Apply weight
                    const weightedScore = normalizedScore * criteriaWeights[criterion];
                    
                    totalScore += weightedScore;
                    
                    console.log(`[v0] ${major.name} - ${criterion}: score=${criterionScore}, normalized=${normalizedScore.toFixed(2)}, weighted=${weightedScore.toFixed(3)}`);
                }

                // Convert to percentage
                const matchPercentage = Math.round(totalScore * 100);

                results.push({
                    ...major,
                    score: totalScore,
                    match: matchPercentage
                });

                console.log(`[v0] ${major.name} - Total Score: ${totalScore.toFixed(3)}, Match: ${matchPercentage}%`);
            });

            // Sort by score (descending)
            results.sort((a, b) => b.score - a.score);

            console.log('[v0] Top 3 recommendations:', results.slice(0, 3).map(r => `${r.name} (${r.match}%)`));

            return results.slice(0, 3); // Return top 3
        }

        // Form submission
        document.getElementById('testForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = {
                name: document.getElementById('name').value,
                age: document.getElementById('age').value,
                subject: document.getElementById('subject').value,
                activity: document.getElementById('activity').value,
                personality: document.getElementById('personality').value,
                environment: document.getElementById('environment').value
            };

            // <CHANGE> Using SAW method for recommendations
            const recommendations = calculateSAW(formData);
            
            // Display results
            displayResults(recommendations, formData.name);
            
            // Scroll to results
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        });

        function displayResults(recommendations, name) {
            const resultsSection = document.getElementById('results');
            const resultCards = document.getElementById('resultCards');
            
            resultsSection.classList.remove('hidden');
            resultCards.innerHTML = '';

            recommendations.forEach((major, index) => {
                const card = document.createElement('div');
                card.className = 'result-card bg-dark-lighter border border-dark-border rounded-xl p-6 hover:border-primary transition-all';
                card.style.animationDelay = `${index * 0.1}s`;
                
                // <CHANGE> Added ranking badge
                const rankBadge = index === 0 ? 'ðŸ¥‡' : index === 1 ? 'ðŸ¥ˆ' : 'ðŸ¥‰';
                
                card.innerHTML = `
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-4xl">${major.icon}</div>
                        <div class="text-2xl">${rankBadge}</div>
                    </div>
                    <div class="flex items-center justify-between mb-3">
                        <h3 class="text-xl font-bold">${major.name}</h3>
                        <span class="px-3 py-1 bg-primary bg-opacity-20 text-primary rounded-full text-sm font-semibold">${major.match}% Match</span>
                    </div>
                    <p class="text-gray-400 mb-4 leading-relaxed">${major.description}</p>
                    <div class="space-y-2">
                        <div class="text-sm font-semibold text-gray-300">Prospek Karir:</div>
                        ${major.careers.map(career => `
                            <div class="text-sm text-gray-400 flex items-center">
                                <span class="w-1.5 h-1.5 bg-primary rounded-full mr-2"></span>
                                ${career}
                            </div>
                        `).join('')}
                    </div>
                `;
                
                resultCards.appendChild(card);
            });
        }

        function resetTest() {
            document.getElementById('testForm').reset();
            document.getElementById('results').classList.add('hidden');
            document.getElementById('test').scrollIntoView({ behavior: 'smooth' });
        }

        // Smooth scroll for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth' });
                    // Close mobile menu if open
                    mobileMenu.classList.add('hidden');
                }
            });
        });
    </script>
</body>
</html>
